# 라우팅 알고리즘 - 01. 링크상태 알고리즘

## 4장 네트워크 계층 Overview
1. 네트워크 계층 서비스 - IP 프로토콜
2. NAT(Network Address Translation) 
3. 라우팅 알고리즘

  3-1. 링크상태 알고리즘
  
  3-2. 거리 벡터 알고리즘
  
4. 계층적 경로 변경

---

<br>

## 라우터의 동작
: 각 라우터의 포워딩 프로시저가 **브로드캐스팅**을 통해 다른 모든 라우터와의 연결상태(link cost)를 알 수 있으며, 이를 기반으로 다익스트라 알고리즘을 이용하여 포워딩 테이블 값을 세팅한다. 그리고 이 테이블의 값에 따라 데이터를 전송한다. => Interplay between routing, forwarding

#### (예시) 라우터들의 연결 상태 다이어그램

![이미지](./image/link_diagram.png)

## 다익스트라 알고리즘

### 1. 초기화(Initializtion)
다른 모든 라우터(이하 노드)에 대해,

1. 만약 그 노드가 나(U에서 시작한다고 가정함.)와 연결(=adjacent)되어 있다면 `D[v] = cost(u,v)` + 직전에 연결된 정점 메모
2. 그렇지 않다면 `D[v] = 무한대`


#### N' 라우터 기준

|     |D[V]|D[W]|D[X]|D[Y]|D[Z]|
|-----|----|----|----|----|----|
| U   | 7,u  | 3,u  | 5,u  |무한대|무한대
| U   |   |   |  |  |  |
| U   |   |   |  |  |  |
| U   |   |   |  |  |  |
| U   |   |   |  |  |  |


### 2. 반복문(Loop)
 
1. N'에 연결된 노드 중 D값이 가장 작은 노드를 찾는다.
2. 그 노드가 새로운 N'이 된다. (N'의 의미 = 이 노드로 가는 최소값은 결정되었다는 뜻)
3. 새로운 N'과 연결된 노드(N'이었던 노드는 재외)들에 대해서 D값을 업데이트한다. `D[v] = min{D(v), D[w] + c(w,v)}`

#### 단계

|     |D[V]   |D[W]   |D[X]   |D[Y]   |   D[Z]|
|-----|-------|-------|-------|-------|-------|
| U   |7,u    | 3,u   | 5,u   |무한대  | 무한대 |
| W   |3+3=6,w|   -   |5,u    |  11,w  | 무한대 |
| U   |       |       |      |      |      |
| U   |       |       |      |      |      |
| U   |       |       |      |      |      |

|     |D[V]   |D[W]   |D[X]   |D[Y]   |   D[Z]|
|-----|-------|-------|-------|-------|-------|
| U   |7,u    | 3,u   | 5,u   |무한대 | 무한대 |
| W   |3+3=6,w|   -   |5,u    |  11,w | 무한대 |
| X   |  6,w  |  -    |  -    | 11,w  |5+9=14,x|
| V   |   |   |  |  |  |
| Z   |   |   |  |  |  |

|     |D[V]   |D[W]   |D[X]   |D[Y]   |   D[Z]|
|-----|-------|-------|-------|-------|-------|
| U   |7,u    | 3,u   | 5,u   |무한대 | 무한대 |
| W   |3+3=6,w|   -   |5,u    |  11,w | 무한대 |
| X   |  6,w  |  -    |  -    | 11,w  |5+9=14,x|
| V   |   -   |   -   |   -   |  10,v |14,x  |
| Z   |   |   |  |  |  |

|     |D[V]   |D[W]   |D[X]   |D[Y]   |   D[Z]|
|-----|-------|-------|-------|-------|-------|
| U   |7,u    | 3,u   | 5,u   |무한대 | 무한대 |
| W   |3+3=6,w|   -   |5,u    |  11,w | 무한대 |
| X   |  6,w  |  -    |  -    | 11,w  |5+9=14,x|
| V   |   -   |   -   |   -   |  10,v |  14,x  |
| Y   |   -   |  -    |  -    |  -    |10+2=12,y|


### 3. + Post processing (포워딩테이블 구성을 위함)

#### 최종적으로 만들어진 라우터(정점) U의 포워딩 테이블 

|destination|forwarding|
|-----------|----------|
|V|W|
|W|W|
|X|X|
|Y|W|
|Z|W|

