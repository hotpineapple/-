## (지난강의) 헷갈리는 개념 정리

1. 프로세스가 운영체제에게 입출력 요청을 할 때, **요청된 입출력 작업이 완료되는 것을 해당 프로세스가**(CPU를 가지고 있든 가지고 있지 않든 중요하지 않다) **기다리고 있다면 동기식 입출력**이라고 한다. 이를 구현하는 방법에는 
    1. 프로세스가 CPU를 계속 가지고 있으면서 아무것도 하지 않는 방법과 
    2. 프로세스를 I/O처리를 기다리는 큐에 줄세우고 다른 프로세스에게 CPU를 넘기고 방법(수업에서 다룰, 일반적인 방법) 두 가지가 있다.  
2. 반면 **입출력 작업 명령 후** 다시 해당 프로세스가 CPU를  가지고 있으면서 **다음 instruction을 수행하는 것을 비동기식 입출력**이라 한다.
<br>

---

<br>

# 스레드(Thread)

## 정의
* a thread or light weight process is a **basic unit of CPU utilization**
* process 내부의 CPU 수행 단위

## 목적
: 어떤 일부의 동일한 일을 하는 서로 다른 프로세스에 대해 각각 주소공간을 생성하면 중복으로 인한 메모리 낭비가 발생한다. → 스레드를 활용하여 해결 

1. 프로세스 주소 공간 : 스레드마다 Stack 관리
2. (커널 주소공간) PCB : 스레드마다 PC와 레지스터값 저장 (=코드의 어느 부분을 실행 중인지와 레지스터 상태)
3. 스레드 간 공유하는 것(Task) :
    1. code section
    2. data section
    3. OS resources

<br>

![thread](https://user-images.githubusercontent.com/77835382/111082687-fb984080-854c-11eb-8f55-b5b75d2db3e0.jpg)

## 스레드 사용의 장점

1. 응답성(Responsiveness)향상

    : 하나의 스레드가 Blocked인 경우에도 다른 스레드는 running하여 빠른 처리가 가능하다.
    
    예) 웹 페이지의 이미지를 불러오는 중에 텍스트 먼저 화면에 표시된다.

2. 자원 (메모리의 프로세스 주소공간) 공유 (Resource sharing)을 통한 자원 절약

    예) 브라우저를 여러 창 띄우거나 한개의 응용프로그램을 여러 개 띄운 경우 : 하나의 프로세스, 여러 개의 스레드로 관리된다.

3. 다중 스레드가 상호 협력하여 높은 처리율(throughput)과 성능 향상

4. 경제성 
    : 프로세스를 생성 및 CPU Switching(Context switch) 하는 것과 비교하여 스레드를 생성 및 CPU Switching(Context switch) 하는 것이 훨씬 적은 overhead를 발생시킨다.

    (주소공간 생성X, 캐시 메모리 flush X)
    
    예) Solaris 
    
    |구분|overhead|
    
    |----|---|
    
    |생성 | 프로세스 생성이 스레드 생성의 30배|
    
    |문맥교환 | 프로세스 생성이 스페드 생성의 5배|
    

5. 병렬성 향상(**멀티 프로세서, 다중CPU 환경**)

    예) 행렬의 곱을 계산할 때, 각 행과 열의 곱 연산을 각각의 CPU가 실행함으로서 빠른 처리가 가능

<br>

## 스레드의 구현

1. 커널 스레드 : 커널에 의해 지원되므로 운영체제가 프로세스 내 여러 개의 스레드의 존재를 알고 있다.

2. 유저 (레벨) 스레드 : 라이브러리를 통해서 지원되며 운영체제는 스레드의 존재를 알지 못하며(단지 하나의 프로세스로 봄), 
    사용자 프로그램이 자체적으로 스레드를 관리한다.
